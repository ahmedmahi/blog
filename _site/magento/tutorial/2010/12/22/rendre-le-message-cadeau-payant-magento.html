<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
<link rel="icon" href="/assets/images/logo.png">
    
<title>Rendre le message cadeau payant – magento | Blog MAHI</title>
    
 
 
    
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
    
<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">
    
<link href="/assets/css/screen.css" rel="stylesheet">
    
<link href="/assets/css/main.css" rel="stylesheet">
    
</head>
    

    

<body class="layout-post">

    
<!-- Begin Menu Navigation
================================================== -->
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    
    <div class="container pr-0">    
    
    <!-- Begin Logo -->
    <a class="navbar-brand" href="/">
    <img src="/assets/images/logo.png" alt="Blog MAHI">
    </a>
    <!-- End Logo -->
  
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
    </button>
    
    
    <div class="collapse navbar-collapse" id="navbarMediumish">
       
        <!-- Begin Menu -->
        
            <ul class="navbar-nav ml-auto">
                
                
                <li class="nav-item">
                
                <a class="nav-link" href="/index.html">Blog</a>
                </li>
                
                
                <li class="nav-item">
                
                <a class="nav-link" href="/about">About</a>
                </li>
                
                <li class="nav-item">
                <a class="nav-link" href="/category/magento/"><i class="fab fa-magento"></i> Magento</a>
                </li>
                
                <li class="nav-item">
                <a  class="nav-link" href="/category/react/"><i class="fab fa-react"></i> React</a>
                </li>
                
                <li class="nav-item">
                <a  class="nav-link" href="/category/laravel/"><i class="fab fa-laravel"></i> Laravel</a>
                </li>

                <li class="nav-item">
                <a target="_blank" class="nav-link" href="https://github.com/ahmedmahi"><i class="fab fa-github"></i></a>
                </li>
                
                <li class="nav-item">
                <a target="_blank"  class="nav-link" href="https://twitter.com/ahmedmahi"><i class="fab fa-twitter"></i></a>
                </li>
                
            </ul>		
  
        <!-- End Menu -->

    </div>
        
    </div>
</nav>
<!-- End Navigation
================================================== -->
    
<div class="site-content">   
<div class="container">
    
<!-- Site Title
================================================== -->
<div class="mainheading">
    <!--h1 class="sitetitle">Blog MAHI</h1-->
    <p class="lead">
         Web - E-commerce - Mobile 
    </p>
</div>

    
    
<!-- Content
================================================== --> 
<div class="main-content">
    <!-- Begin Article
================================================== -->
<div class="container">
	<div class="row">

		<!-- Post Share -->
		<div class="col-md-2 pl-0">            
           <div class="share">
    <p>
        Share
    </p>
    <ul>
        <li class="ml-1 mr-1">
        <a target="_blank" href="https://twitter.com/intent/tweet?text=Rendre le message cadeau payant – magento&url=/magento/tutorial/2010/12/22/rendre-le-message-cadeau-payant-magento.html" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <i class="fab fa-twitter"></i>
        </a>
        </li>
        
        <li class="ml-1 mr-1">
        <a target="_blank" href="https://facebook.com/sharer.php?u=/magento/tutorial/2010/12/22/rendre-le-message-cadeau-payant-magento.html" onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;">
        <i class="fab fa-facebook-f"></i>
        </a>
        </li>
        
        <li class="ml-1 mr-1">
        <a target="_blank" href="https://plus.google.com/share?url=/magento/tutorial/2010/12/22/rendre-le-message-cadeau-payant-magento.html" onclick="window.open(this.href, 'facebook-google', 'width=550,height=435');return false;">
        <i class="fab fa-google"></i>
        </a>
        </li>
        
    </ul>
    
    <div class="sep">
    </div>				
    <ul>
        <li> 
        <a  class="small smoothscroll" href="#disqus_thread"></a>
        </li>
    </ul>
    
</div>  
		</div>
		

		<!-- Post -->        
        
        
		<div class="col-md-9 flex-first flex-md-unordered">
			<div class="mainheading">

                <!-- Author Box -->
                				
				<div class="row post-top-meta">
					<div class="col-md-2">
						<img class="author-thumb" src="https://www.gravatar.com/avatar/e5420c92f230112dec8f064f2c6b67cc?s=250&d=mm&r=x" alt="Ahmed">
					</div>
					<div class="col-md-10">
						<a target="_blank" class="link-dark" href="https://mahi.ma">Ahmed</a><a target="_blank" href="https://twitter.com/ahmedmahi" class="btn follow">Follow</a>
						<span class="author-description">Ahmed MAHI consultant Technique web, e-commerce et mobile avec 10 ans d’expérience.</span>						
					</div>
				</div>				
                
                
                <!-- Post Title -->
				<h1 class="posttitle">Rendre le message cadeau payant – magento</h1> 
                
			</div>

			<!-- Post Featured Image -->
			<img class="featured-image img-fluid" src="/assets/images/message-cadeau.jpg" alt="Rendre le message cadeau payant – magento">
			<!-- End Featured Image -->

			<!-- Post Content -->
			<div class="article-post">
				<p>Aujourd’hui je vous propose un petit module que j’ai développé pour rendre le message cadeau payant l’idée est d’ajouter un produit “Message cadeau” au panier si le message est spécifié lors du passage de la commande.
Au niveau utilisation c’est très simple il faut d’abord activer les messages cadeau :
System -&gt; configuration -&gt; Ventes -&gt; Messages cadeau-&gt; Autoriser les messages cadeau au niveau de la commande.
Puis crée le produit “Message cadeau” et n’oubliez pas de mettre une quantité positive du stock ou de choisir “Non” pour “Gérer les stocks” sinon le produit ne s’ajoute pas.
Pius installer le module, allez à System -&gt; configuration -&gt; Ventes -&gt; Produit message cadeau pour activer le module et ajouter l’ID du produit.
Au niveau développement <img src="http://blog.ahmedmahi.com/wp-includes/images/smilies/icon_smile.gif" alt=":)" /> :
Il s’agit d’un observer de deux events :
checkout_controller_onepage_save_shipping_method et checkout_controller_multishipping_shipping_post (pour le choix du multishipping ) donc un fichier config.xml qui correspond à :</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="c">&lt;!--&gt;
/**
 * @category   Mahigento
 * @package    Mahigento_Pgm
 * @author    Ahmed MAHI/ S3i Business: 1hmedmahi@gmail.com -www.ahmedmahi.com
 * @license   http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
 */
 &lt;--&gt;</span>
<span class="nt">&lt;config&gt;</span>
    <span class="nt">&lt;modules&gt;</span>
        <span class="nt">&lt;Mahigento_Pgm&gt;</span>
            <span class="nt">&lt;version&gt;</span>0.1.0<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/Mahigento_Pgm&gt;</span>
    <span class="nt">&lt;/modules&gt;</span>
        <span class="nt">&lt;adminhtml&gt;</span>
        <span class="nt">&lt;acl&gt;</span>
            <span class="nt">&lt;resources&gt;</span>
                <span class="nt">&lt;admin&gt;</span>
                    <span class="nt">&lt;children&gt;</span>
                        <span class="nt">&lt;system&gt;</span>
                            <span class="nt">&lt;children&gt;</span>
                                <span class="nt">&lt;config&gt;</span>
                                    <span class="nt">&lt;children&gt;</span>
                                        <span class="nt">&lt;pgm</span> <span class="na">translate=</span><span class="s">"title"</span> <span class="na">module=</span><span class="s">"pgm"</span><span class="nt">&gt;</span>
                                       <span class="nt">&lt;title&gt;</span>Produit message cadeau<span class="nt">&lt;/title&gt;</span>
                                            <span class="nt">&lt;sort_order&gt;</span>50<span class="nt">&lt;/sort_order&gt;</span>
                                        <span class="nt">&lt;/pgm&gt;</span>
                                    <span class="nt">&lt;/children&gt;</span>
                                <span class="nt">&lt;/config&gt;</span>
                            <span class="nt">&lt;/children&gt;</span>
                        <span class="nt">&lt;/system&gt;</span>
                    <span class="nt">&lt;/children&gt;</span>
                <span class="nt">&lt;/admin&gt;</span>
            <span class="nt">&lt;/resources&gt;</span>
        <span class="nt">&lt;/acl&gt;</span>
    <span class="nt">&lt;/adminhtml&gt;</span>
    <span class="nt">&lt;global&gt;</span>
        <span class="nt">&lt;models&gt;</span>
            <span class="nt">&lt;pgm&gt;</span>
                <span class="nt">&lt;class&gt;</span>Mahigento_Pgm_Model<span class="nt">&lt;/class&gt;</span>
            <span class="nt">&lt;/pgm&gt;</span>
        <span class="nt">&lt;/models&gt;</span>
        <span class="nt">&lt;events&gt;</span>
            <span class="nt">&lt;checkout_controller_onepage_save_shipping_method&gt;</span>
                <span class="nt">&lt;observers&gt;</span>
                    <span class="nt">&lt;mahigento_pgm_shipping&gt;</span>
                        <span class="nt">&lt;type&gt;</span>model<span class="nt">&lt;/type&gt;</span>
                        <span class="nt">&lt;class&gt;</span>pgm/pgm<span class="nt">&lt;/class&gt;</span>
                        <span class="nt">&lt;method&gt;</span>addGiftMessageProduct<span class="nt">&lt;/method&gt;</span>
                    <span class="nt">&lt;/mahigento_pgm_shipping&gt;</span>
                <span class="nt">&lt;/observers&gt;</span>
            <span class="nt">&lt;/checkout_controller_onepage_save_shipping_method&gt;</span>
            <span class="nt">&lt;checkout_controller_multishipping_shipping_post&gt;</span>
                <span class="nt">&lt;observers&gt;</span>
                    <span class="nt">&lt;mahigento_pgm_multishipping&gt;</span>
                        <span class="nt">&lt;type&gt;</span>model<span class="nt">&lt;/type&gt;</span>
                        <span class="nt">&lt;class&gt;</span>pgm/pgm<span class="nt">&lt;/class&gt;</span>
                        <span class="nt">&lt;method&gt;</span>addGiftMessageProduct<span class="nt">&lt;/method&gt;</span>
                    <span class="nt">&lt;/mahigento_pgm_multishipping&gt;</span>
                <span class="nt">&lt;/observers&gt;</span>
            <span class="nt">&lt;/checkout_controller_multishipping_shipping_post&gt;</span>
        <span class="nt">&lt;/events&gt;</span>
    <span class="nt">&lt;/global&gt;</span>
<span class="nt">&lt;/config&gt;</span>
</code></pre></div></div>

<p>Et un fichier system.xml pour ajouter les éléments de la configuration :activation du module et la spécification de l’id du produit à ajouter.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="c">&lt;!--&gt;
/**
 * @category   Mahigento
 * @package    Mahigento_Pgm
 * @author    Ahmed MAHI/ S3i Business: 1hmedmahi@gmail.com -www.ahmedmahi.com
 * @license   http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
 */
 &lt;--&gt;</span>
<span class="nt">&lt;config&gt;</span>
    <span class="nt">&lt;sections&gt;</span>
        <span class="nt">&lt;pgm</span> <span class="na">translate=</span><span class="s">"label"</span> <span class="na">module=</span><span class="s">"pgm"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;label&gt;</span>Produit message cadeau<span class="nt">&lt;/label&gt;</span>
            <span class="nt">&lt;tab&gt;</span>sales<span class="nt">&lt;/tab&gt;</span>
            <span class="nt">&lt;frontend_type&gt;</span>text<span class="nt">&lt;/frontend_type&gt;</span>
            <span class="nt">&lt;sort_order&gt;</span>900<span class="nt">&lt;/sort_order&gt;</span>
            <span class="nt">&lt;show_in_default&gt;</span>1<span class="nt">&lt;/show_in_default&gt;</span>
            <span class="nt">&lt;show_in_website&gt;</span>1<span class="nt">&lt;/show_in_website&gt;</span>
            <span class="nt">&lt;show_in_store&gt;</span>0<span class="nt">&lt;/show_in_store&gt;</span>
            <span class="nt">&lt;groups&gt;</span>
                <span class="nt">&lt;settings</span> <span class="na">translate=</span><span class="s">"label"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;label&gt;</span>Settings<span class="nt">&lt;/label&gt;</span>
                    <span class="nt">&lt;frontend_type&gt;</span>text<span class="nt">&lt;/frontend_type&gt;</span>
                    <span class="nt">&lt;sort_order&gt;</span>1<span class="nt">&lt;/sort_order&gt;</span>
                    <span class="nt">&lt;show_in_default&gt;</span>1<span class="nt">&lt;/show_in_default&gt;</span>
                    <span class="nt">&lt;show_in_website&gt;</span>1<span class="nt">&lt;/show_in_website&gt;</span>
                    <span class="nt">&lt;show_in_store&gt;</span>0<span class="nt">&lt;/show_in_store&gt;</span>
                    <span class="nt">&lt;fields&gt;</span>
                        <span class="nt">&lt;enabled</span> <span class="na">translate=</span><span class="s">"label"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label&gt;</span>Activer<span class="nt">&lt;/label&gt;</span>
                            <span class="nt">&lt;frontend_type&gt;</span>select<span class="nt">&lt;/frontend_type&gt;</span>
                            <span class="nt">&lt;source_model&gt;</span>adminhtml/system_config_source_yesno<span class="nt">&lt;/source_model&gt;</span>
                            <span class="nt">&lt;sort_order&gt;</span>1<span class="nt">&lt;/sort_order&gt;</span>
                            <span class="nt">&lt;show_in_default&gt;</span>1<span class="nt">&lt;/show_in_default&gt;</span>
                            <span class="nt">&lt;show_in_website&gt;</span>1<span class="nt">&lt;/show_in_website&gt;</span>
                            <span class="nt">&lt;show_in_store&gt;</span>0<span class="nt">&lt;/show_in_store&gt;</span>
                        <span class="nt">&lt;/enabled&gt;</span>
                        <span class="nt">&lt;productid</span> <span class="na">translate=</span><span class="s">"label"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label&gt;</span>ID produit<span class="nt">&lt;/label&gt;</span>
                            <span class="nt">&lt;frontend_type&gt;</span>text<span class="nt">&lt;/frontend_type&gt;</span>
                            <span class="nt">&lt;sort_order&gt;</span>2<span class="nt">&lt;/sort_order&gt;</span>
                            <span class="nt">&lt;show_in_default&gt;</span>1<span class="nt">&lt;/show_in_default&gt;</span>
                            <span class="nt">&lt;show_in_website&gt;</span>1<span class="nt">&lt;/show_in_website&gt;</span>
                            <span class="nt">&lt;show_in_store&gt;</span>0<span class="nt">&lt;/show_in_store&gt;</span>
                        <span class="nt">&lt;/productid&gt;</span>
                    <span class="nt">&lt;/fields&gt;</span>
                <span class="nt">&lt;/settings&gt;</span>
            <span class="nt">&lt;/groups&gt;</span>
        <span class="nt">&lt;/pgm&gt;</span>
    <span class="nt">&lt;/sections&gt;</span>
<span class="nt">&lt;/config&gt;</span>
</code></pre></div></div>

<p>Et l’observer avec quelques commentaires :</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span> 
    <span class="sd">/**  
    * @category   Mahigento   
    * @package    Mahigento_Pgm   
    * @author    Ahmed MAHI/ S3i Business: 1hmedmahi@gmail.com -www.ahmedmahi.com  
    * @license   http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)  
    */</span> 
    <span class="k">class</span> <span class="nc">Mahigento_Pgm_Model_Pgm</span>  <span class="p">{</span>     
    <span class="k">private</span> <span class="nv">$_giftId</span><span class="p">;</span>     <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">()</span> <span class="p">{</span>         <span class="k">if</span><span class="p">(</span><span class="nx">Mage</span><span class="o">::</span><span class="na">getStoreConfig</span><span class="p">(</span><span class="s1">'produitcadeau/settings/enabled'</span><span class="p">))</span> <span class="p">{</span>             
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_giftId</span> <span class="o">=</span><span class="nx">Mage</span><span class="o">::</span><span class="na">getStoreConfig</span><span class="p">(</span><span class="s1">'pgm/settings/productid'</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="c1">// La méthode principale d'ajout de notre produit "message cadeau"</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">addGiftMessageProduct</span><span class="p">(</span><span class="nv">$observer</span><span class="p">)</span>
    <span class="p">{</span>
       <span class="c1">//Vérifier si le module est activé</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">Mage</span><span class="o">::</span><span class="na">getStoreConfig</span><span class="p">(</span><span class="s1">'produitcadeau/settings/enabled'</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$giftMessages</span> <span class="o">=</span> <span class="nv">$observer</span><span class="o">-&gt;</span><span class="na">getEvent</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getRequest</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getParam</span><span class="p">(</span><span class="s1">'giftmessage'</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$giftMessages</span><span class="p">))</span> <span class="p">{</span>
               <span class="c1">// Supprimer le produit s'il est déjà dans le panier</span>
               <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">removeGiftMessageProduct</span><span class="p">(</span><span class="nv">$observer</span><span class="o">-&gt;</span><span class="na">getQuote</span><span class="p">());</span>
                <span class="k">if</span><span class="p">(</span><span class="nv">$product</span><span class="o">=</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getProduct</span><span class="p">())</span> <span class="p">{</span>
                    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$giftMessages</span> <span class="k">as</span> <span class="nv">$entityId</span><span class="o">=&gt;</span><span class="nv">$message</span><span class="p">)</span> <span class="p">{</span>
                      <span class="c1">//Si le message est vide ne fait rien continué</span>
                        <span class="k">if</span><span class="p">(</span><span class="nb">trim</span><span class="p">(</span><span class="nv">$message</span><span class="p">[</span><span class="s1">'message'</span><span class="p">])</span><span class="o">==</span><span class="s1">''</span><span class="p">)</span> <span class="p">{</span>
                            <span class="k">continue</span><span class="p">;</span>
                        <span class="p">}</span>
                        <span class="nv">$cart</span><span class="o">=</span><span class="nx">Mage</span><span class="o">::</span><span class="na">getSingleton</span><span class="p">(</span><span class="s1">'checkout/cart'</span><span class="p">);</span>
                        <span class="nv">$cart</span><span class="o">-&gt;</span><span class="na">addProduct</span><span class="p">(</span><span class="nv">$product</span><span class="p">);</span>
                        <span class="nv">$cart</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="c1">//Sinon une fois un changement détecté dans le panier il aura une redirection vers la page panier (la méthode _expireAjax du controlleur)</span>
                <span class="nx">Mage</span><span class="o">::</span><span class="na">getSingleton</span><span class="p">(</span><span class="s1">'checkout/session'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">setCartWasUpdated</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nv">$this</span><span class="p">;</span>
        <span class="p">}}</span>
    <span class="c1">//Supprimer le produit du panier</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">removeGiftMessageProduct</span><span class="p">(</span><span class="nv">$quote</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$quote</span><span class="o">-&gt;</span><span class="na">getAllItems</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$item</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nv">$item</span><span class="o">-&gt;</span><span class="na">getProductId</span><span class="p">()</span> <span class="o">==</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_giftId</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">Mage</span><span class="o">::</span><span class="na">getSingleton</span><span class="p">(</span><span class="s1">'checkout/cart'</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">removeItem</span><span class="p">(</span><span class="nv">$item</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">())</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getProduct</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_giftId</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$product</span> <span class="o">=</span> <span class="nx">Mage</span><span class="o">::</span><span class="na">getModel</span><span class="p">(</span><span class="s1">'catalog/product'</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">load</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_giftId</span><span class="p">);</span>
            <span class="nx">Mage</span><span class="o">::</span><span class="na">log</span><span class="p">(</span><span class="nv">$product</span><span class="o">-&gt;</span><span class="na">getStockItem</span><span class="p">());</span>
            <span class="c1">//"En stock" ou  "Non" pour  "Gérer les stocks" sinon le produit ne pourra pas être ajouté</span>
            <span class="k">if</span> <span class="p">(</span><span class="nv">$product</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">()</span><span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span><span class="o">&amp;</span><span class="nx">amp</span><span class="p">;(</span><span class="o">!</span><span class="nv">$product</span><span class="o">-&gt;</span><span class="na">getStockItem</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getUseConfigManageStock</span><span class="p">()</span><span class="o">||</span><span class="nv">$product</span><span class="o">-&gt;</span><span class="na">getStockItem</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getIsInStock</span><span class="p">()))</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nv">$product</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>


			</div>

            <!-- Post Date -->
            <p>
            <small>
                <span class="post-date"><time class="post-date" datetime="2010-12-22">22 Dec 2010</time></span>           
                
                </small>
            </p>
            
			<!-- Post Categories -->
			<div class="after-post-tags">
				<ul class="tags">
                    
                    
                    <li>
                     <a href="/category/magento/">magento</a>
                    </li>
                    
                    <li>
                     <a href="/category/tutorial/">tutorial</a>
                    </li>
                    
				</ul>
			</div>
			<!-- End Categories -->
            
            <!-- Prev/Next -->
            <div class="row PageNavigation d-flex justify-content-between font-weight-bold">
            
            <a class="prev d-block col-md-6" href="/magento/tutorial/2010/10/21/bargento-5-m-commerce-payement-a-lhonneur.html"> &laquo; Bargento 5 : M-commerce, payement à l’honneur</a>
            
            
            <a class="next d-block col-md-6 text-lg-right" href="/tutorial/magento/2011/11/29/associe-un-produit-cadeau-a-une-regle-de-prix-panier-magento.html">Associé un produit cadeau a une règle de prix panier Magento" &raquo; </a>
            
            <div class="clearfix"></div>
            </div>
            <!-- End Categories -->

		</div>
		<!-- End Post -->

	</div>
</div>
<!-- End Article
================================================== -->

  

<!-- Begin Comments
================================================== -->

    <div class="container">
        <div id="comments" class="row justify-content-center mb-5">
            <div class="col-md-8">              
                <section class="disqus">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'ahmedmahi'; 
        var disqus_developer = 0;
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = window.location.protocol + '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>
                
            </div>
        </div>
    </div>

<!--End Comments
================================================== -->
</div>


<!-- Bottom Alert Bar
================================================== -->
<div class="alertbar">
	<div class="container text-center">
		<span><img src="/assets/images/logo.png" alt=""> &nbsp; Abonnez-vous à la newsletter</span>
        <form action="https://mailchi.mp/e6becf892892/blogahmedmahi" method="post" name="mc-embedded-subscribe-form" class="wj-contact-form validate" target="_blank" novalidate>
            <div class="mc-field-group">
            <input type="email" placeholder="Email" name="EMAIL" class="required email" id="mce-EMAIL" autocomplete="on" required>
            <input type="submit" value="Je m'abonne" name="subscribe" class="heart">
            </div>
        </form>
	</div>
</div>    

    
</div><!-- /.container>
    
<!-- Categories Jumbotron
================================================== -->
<div class="jumbotron fortags">
	<div class="d-md-flex h-100">
		<div class="col-md-4 transpdark align-self-center text-center h-100">
            <div class="d-md-flex align-items-center justify-content-center h-100">
                <h2 class="d-md-block align-self-center py-1 font-weight-light">Explore <span class="d-none d-md-inline">→</span></h2>
            </div>
		</div>
		<div class="col-md-8 p-5 align-self-center text-center">
            
          
             
              <a href="/category/magento">Magento (9)</a>
             
              <a href="/category/tutorial">Tutorial (9)</a>
            
          
        

		</div>
	</div>
</div>
 


<!-- Begin Footer
================================================== -->
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                 Copyright © 2019 Blog MAHI 
            </div>
            <div class="col-md-6 col-sm-6 text-center text-lg-right">    
                
            </div>
        </div>
    </div>
</footer>
<!-- End Footer
================================================== -->

   
</div> <!-- /.site-content>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
    
<script src="/assets/js/jquery.min.js"></script>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    
<script src="/assets/js/ie10-viewport-bug-workaround.js"></script>
    
<script src="/assets/js/mediumish.js"></script>
    
<script id="dsq-count-scr" src="//ahmedmahi.disqus.com/count.js"></script>
</body>
</html>
